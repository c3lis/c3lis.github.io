---
title: Nmap
published: true
---

<font color="lime">2022-07-30</font>

Nmap para reconocer puertos activos en una maquina o un <font color="blue">Hosts.</font>


 <p><font color="yellow">[<font color="red">*</font>]</font><font color="yellow"> Tipos de scaneo : </font></p>

* TCP
```1
nmap --min-rate 5000 -sS -n --open -vvv -Pn 8.8.8.8 -o allports
```
<p>Es un scaneo normal, el cual es el que siempre usamos.</p>

* UDP
```1
nmap --min-rate 5000 -sS -sU -open -vvv -Pn 8.8.8.8 -o allports
```
<p>Aqui el factor a destacar para que se convierta en un scaneo <font color="blue"> UDP</font> es la opcion <font color="yellow">-sU.</font></p>

<br>
<p><font color="yellow">[<font color="red">*</font>]</font> Para scaneo de servicio de puertos:</p>

```1
nmap --min-rate 5000 -sCV -n -v -o allservices
```
----

<br>
<p><font color="yellow">[<font color="red">*</font>]</font>Scripts de nmap : </p>
<p> Comando para ver todos los cripts de nmap</p>
```1
locate .nse 
```
<p>Si no tiene locate en su <font color="yellow">Arch-linux </font>: </p>
```1
pacman -S locate && updatedb
```
<p>Si no tiene <font color="blue">locate </font>en <font color="yellow">Linux</font></p>
```1
sudo apt-get install locate && updatedb
```

-----


<br>
<b><font color="yellow">[<font color="red">*</font>]</font></b> Ver lo que hace el script <font color="blue">http-enum</font> por detras :
<b><font color="yellow">Nos ponemos en escucha con nuestra interfaz que usa linux por defecto en mi caso es la</font></b> `lo`, pueden ver la suya con el comando
`lo`.
```1
tcpdump -i lo -w captura.cap
```
En otra terminal hacemos un scaneo utilizando el script `http-enum`, yo lo lanzare con mi localhots para que sea mas rapido.
```1
nmap --script http-enum localhot
```

En la otra terminal con el tcpdump veremos ya la captura para mirarla hacemos el comando
```1
tshark -r captura.cap
```
Veremos un monton de <font color="blue"> informacion</font> para filtrar por lo que nos interesa para eso <font color="blue">tshark</font>
tiene para metros de busqueda que es con la letra `-Y` y filtrare por `http` con el parametro `-Tjson` queremos que no los muestre
en formato json.

```1
tshark -Y "http" -Tjson captura.cap
```

Nos mostrara unas cosas no tan relevantes para filtrar el campo que nos interesa es uno llamado `tcp.payload`, para ello se
hace uso del parametro `-Tfields -e tcp.payload` el cual estara en <font color="blue">hexadecimal</font> para convertir de <font color="blue">hexadecimal</font> a legible se usa
una funcion llamada `xxd` la cual si la concatenamos con el resultado anterior con el parametro `| xxd -ps -r` pues ya veromos
las peticiones que tramita nmap.


